"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.contact=void 0;var _contactUsForm=_interopRequireDefault(require("../models/contactUsForm.js")),_mailer=require("../utils/mailer.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var contact=function(r,t){var a,n,s,o,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.body,n=a.fname,s=a.email,o=a.message,e.prev=1,c=new _contactUsForm.default({fname:n,email:s,message:o}),e.next=5,regeneratorRuntime.awrap(c.save());case 5:return e.next=7,regeneratorRuntime.awrap((0,_mailer.sendEmail)(process.env.EMAIL_USER,"New Newsletter Subscription","A new user has subscribed to the newsletter with email: ".concat(s)));case 7:return e.next=9,regeneratorRuntime.awrap((0,_mailer.sendConfirmationEmail)(s,n));case 9:t.json({Message:"Thank you for contacting us",formData:c}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.status(500).json({message:"Internal server error",Error:e.t0.message});case 15:case"end":return e.stop()}},null,null,[[1,12]])};exports.contact=contact;
//# sourceMappingURL=contactController.min.js.map
